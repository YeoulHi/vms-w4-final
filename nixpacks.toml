[phases.setup]
# python313과 python313Packages.pip을 명시적으로 설치합니다.
nixPkgs = ["python313", "python313Packages.pip"]

[phases.install]
# Nix 환경에서 pip 설치 허용
cmds = ["pip install --break-system-packages -r requirements.txt"]

[start]
# 빌드 단계가 아닌 시작 단계에서 migrate 실행
cmd = "python manage.py migrate --noinput && python manage.py collectstatic --noinput && gunicorn config.wsgi:application --bind 0.0.0.0:$PORT"
