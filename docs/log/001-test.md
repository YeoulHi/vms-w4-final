# 001. ë¡œê·¸ì¸ ë° ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ - ì‹¤í–‰ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

**ë¬¸ì„œ ë²„ì „:** 1.0
**ì‘ì„±ì¼:** 2025-10-31
**ë²”ìœ„:** UserFlow #01 ì‹¤ì œ ì‚¬ìš©ì í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

---

## ğŸ“‹ ê°œìš”

ë³¸ ë¬¸ì„œëŠ” ë¡œê·¸ì¸ ë° ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥ì„ ì‹¤ì œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” **ìˆœì°¨ì  ê°€ì´ë“œ**ì…ë‹ˆë‹¤.

**ëª©í‘œ:**
- ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤(TC-01~05)ë¥¼ ì‹¤í–‰ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì„±
- ì´ˆë³´ìë„ ë”°ë¼í•  ìˆ˜ ìˆëŠ” ë‹¨ê³„ë³„ ì§€ì¹¨
- ì˜ˆìƒ ê²°ê³¼ì™€ ë¬¸ì œ í•´ê²° ë°©ë²• ì œì‹œ

---

## ğŸ”§ ì‚¬ì „ ì¤€ë¹„

### í•„ìˆ˜ ì¡°ê±´
```bash
- Python 3.10+
- Django 5.x
- ì›¹ ë¸Œë¼ìš°ì € (Chrome, Firefox ë“±)
- Terminal ë˜ëŠ” PowerShell
```

### ì„¤ì¹˜ í™•ì¸
```bash
# Python ë²„ì „ í™•ì¸
python --version

# Django ì„¤ì¹˜ í™•ì¸
pip list | grep Django
```

---

## ğŸš€ ì´ˆê¸° ì„¤ì • (ë°˜ë“œì‹œ ë¨¼ì € ìˆ˜í–‰)

### Step 0.1: í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ì´ë™
```bash
cd C:\Vibe-Mafia\w6-8-final-duwls
```

### Step 0.2: ê°€ìƒ í™˜ê²½ í™œì„±í™”
```bash
# Windows
venv\Scripts\activate

# macOS / Linux
source venv/bin/activate
```

**í™•ì¸:** í„°ë¯¸ë„ ì™¼ìª½ì— `(venv)` í‘œì‹œë˜ì–´ì•¼ í•¨

### Step 0.3: ì˜ì¡´ì„± ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

### Step 0.4: ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜
python manage.py migrate

# ì„¤ì • ê²€ì¦
python manage.py check
```

**ì„±ê³µ ë©”ì‹œì§€:**
```
System check identified no issues (0 silenced).
```

### Step 0.5: í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„±
```bash
# Django shell ì‹¤í–‰
python manage.py shell

# Python ì¸í„°í”„ë¦¬í„°ì—ì„œ:
```

```python
from django.contrib.auth.models import User

# ê´€ë¦¬ì ê³„ì •
User.objects.create_superuser('admin', 'admin@test.com', 'admin123!')

# ì¼ë°˜ ì‚¬ìš©ì
User.objects.create_user('user1', 'user1@test.com', 'user123!')
User.objects.create_user('user2', 'user2@test.com', 'user123!')

# í™•ì¸
print(f"ìƒì„±ëœ ì‚¬ìš©ì: {User.objects.count()}")
exit()
```

### Step 0.6: í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€
```bash
python manage.py shell
```

```python
from apps.ingest.models import MetricRecord
from decimal import Decimal

# 2023ë…„ ë°ì´í„°
MetricRecord.objects.create(
    year=2023,
    department="ì»´í“¨í„°ê³µí•™ê³¼",
    metric_type="PAPER",
    metric_value=Decimal("10.0")
)

MetricRecord.objects.create(
    year=2023,
    department="ì»´í“¨í„°ê³µí•™ê³¼",
    metric_type="BUDGET",
    metric_value=Decimal("50000.0")
)

# 2024ë…„ ë°ì´í„°
MetricRecord.objects.create(
    year=2024,
    department="ì»´í“¨í„°ê³µí•™ê³¼",
    metric_type="PAPER",
    metric_value=Decimal("15.0")
)

MetricRecord.objects.create(
    year=2024,
    department="ì»´í“¨í„°ê³µí•™ê³¼",
    metric_type="BUDGET",
    metric_value=Decimal("60000.0")
)

# ë‹¤ë¥¸ í•™ê³¼
MetricRecord.objects.create(
    year=2024,
    department="ì „ìê³µí•™ê³¼",
    metric_type="PAPER",
    metric_value=Decimal("12.0")
)

print(f"ë°ì´í„° ì¶”ê°€ ì™„ë£Œ: {MetricRecord.objects.count()}ê°œ")
exit()
```

### Step 0.7: ê°œë°œ ì„œë²„ ì‹œì‘
```bash
python manage.py runserver
```

**í™•ì¸:**
```
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
```

---

## âœ… TC-01: ë¹„ë¡œê·¸ì¸ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼

### ëª©í‘œ
> ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìê°€ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ â†’ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸

### ì‹¤í–‰ ë‹¨ê³„

#### 1ë‹¨ê³„: ë¸Œë¼ìš°ì €ì—ì„œ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼
```
URL: http://localhost:8000/dashboard/
```

#### 2ë‹¨ê³„: ê²°ê³¼ í™•ì¸
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **ë¦¬ë‹¤ì´ë ‰íŠ¸ ìœ„ì¹˜** | http://localhost:8000/login/?next=/dashboard/ |
| **í˜ì´ì§€ ì œëª©** | ë¡œê·¸ì¸ í˜ì´ì§€ |
| **ì…ë ¥ í•„ë“œ** | Username, Password, ë¡œê·¸ì¸ ë²„íŠ¼ |

#### 3ë‹¨ê³„: í†µê³¼ í™•ì¸
- â˜ ìë™ìœ¼ë¡œ `/login/` ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¨
- â˜ ë¡œê·¸ì¸ í¼ì´ í‘œì‹œë¨

### ì˜ˆìƒ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¡œê·¸ì¸                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚ Username:  [_________________]  â”‚
â”‚ Password:  [_________________]  â”‚
â”‚                                 â”‚
â”‚         [ ë¡œê·¸ì¸ ]              â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… TC-04: ìœ íš¨í•œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

### ëª©í‘œ
> ì˜¬ë°”ë¥¸ ID/PW ë¡œê·¸ì¸ â†’ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™

### ì‹¤í–‰ ë‹¨ê³„

#### 1ë‹¨ê³„: í˜„ì¬ í˜ì´ì§€ ìœ„ì¹˜ í™•ì¸
```
í˜„ì¬ URL: http://localhost:8000/login/
```

#### 2ë‹¨ê³„: ê³„ì • ì •ë³´ ì…ë ¥
```
Username: user1
Password: user123!
```

#### 3ë‹¨ê³„: ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
```
ë²„íŠ¼: ë¡œê·¸ì¸ ë˜ëŠ” Sign In
```

#### 4ë‹¨ê³„: ê²°ê³¼ í™•ì¸
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **ë¦¬ë‹¤ì´ë ‰íŠ¸ ìœ„ì¹˜** | http://localhost:8000/dashboard/ |
| **í˜ì´ì§€ ì œëª©** | ëŒ€ì‹œë³´ë“œ |
| **í‘œì‹œ ìš”ì†Œ** | í•„í„° í•„ë“œ, ì°¨íŠ¸ ì˜ì—­ |

#### 5ë‹¨ê³„: í†µê³¼ í™•ì¸
- â˜ ìë™ìœ¼ë¡œ `/dashboard/` ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¨
- â˜ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ê°€ í‘œì‹œë¨
- â˜ í•„í„° í•„ë“œ(ì—°ë„, í•™ê³¼)ê°€ ë³´ì„

### ì˜ˆìƒ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ëŒ€ì‹œë³´ë“œ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚ í•„í„°:                                â”‚
â”‚ ì—°ë„: [2024 â–¼]  í•™ê³¼: [ì „ì²´ â–¼]      â”‚
â”‚                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“Š ì°¨íŠ¸ ì˜ì—­                      â”‚ â”‚
â”‚ â”‚ (ë°ì´í„°ê°€ ìˆìœ¼ë©´ í‘œì‹œ)            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âŒ TC-04-1: ìœ íš¨í•˜ì§€ ì•Šì€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

### ëª©í‘œ
> ì˜ëª»ëœ ID/PW â†’ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

### ì‹¤í–‰ ë‹¨ê³„

#### 1ë‹¨ê³„: ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ê·¼
```
URL: http://localhost:8000/login/
```

#### 2ë‹¨ê³„: ì˜ëª»ëœ ì •ë³´ ì…ë ¥
```
Username: wronguser
Password: wrongpass
```

#### 3ë‹¨ê³„: ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­

#### 4ë‹¨ê³„: ê²°ê³¼ í™•ì¸
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **í˜ì´ì§€** | ë¡œê·¸ì¸ í˜ì´ì§€ (ìƒˆë¡œê³ ì¹¨ë¨) |
| **ì—ëŸ¬ ë©”ì‹œì§€** | "Invalid username or password." |
| **ì…ë ¥ í•„ë“œ** | ë¹„ì›Œì§ |
| **URL** | http://localhost:8000/login/ (ë³€ê²½ ì—†ìŒ) |

#### 5ë‹¨ê³„: í†µê³¼ í™•ì¸
- â˜ ë¡œê·¸ì¸ í˜ì´ì§€ê°€ ë‹¤ì‹œ í‘œì‹œë¨
- â˜ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ìƒë‹¨ì— í‘œì‹œë¨
- â˜ ì…ë ¥ í•„ë“œê°€ ë¹„ì›Œì§

### ì˜ˆìƒ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¡œê·¸ì¸                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚ âš ï¸  Invalid username or password.   â”‚
â”‚                                      â”‚
â”‚ Username:  [_________________]      â”‚
â”‚ Password:  [_________________]      â”‚
â”‚                                      â”‚
â”‚         [ ë¡œê·¸ì¸ ]                  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… TC-02: ì´ë¯¸ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ê·¼

### ëª©í‘œ
> ë¡œê·¸ì¸ ìƒíƒœì—ì„œ `/login/` ì ‘ê·¼ â†’ ëŒ€ì‹œë³´ë“œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### ì‹¤í–‰ ë‹¨ê³„

#### 1ë‹¨ê³„: ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
```
í˜„ì¬ ìœ„ì¹˜: http://localhost:8000/dashboard/
ìƒíƒœ: ë¡œê·¸ì¸ ì™„ë£Œ
```

#### 2ë‹¨ê³„: ë¡œê·¸ì¸ í˜ì´ì§€ ì§ì ‘ ì ‘ê·¼
```
URL: http://localhost:8000/login/
```

#### 3ë‹¨ê³„: ê²°ê³¼ í™•ì¸
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **ë¦¬ë‹¤ì´ë ‰íŠ¸ ìœ„ì¹˜** | http://localhost:8000/dashboard/ |
| **í˜ì´ì§€** | ëŒ€ì‹œë³´ë“œ |
| **ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œê°„** | ì¦‰ì‹œ (1ì´ˆ ì´ë‚´) |

#### 4ë‹¨ê³„: í†µê³¼ í™•ì¸
- â˜ ìë™ìœ¼ë¡œ ëŒ€ì‹œë³´ë“œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¨
- â˜ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸

### ê°œë°œì ë„êµ¬ë¡œ í™•ì¸ (ì„ íƒ)
```
1. F12 í‚¤ â†’ Network íƒ­
2. http://localhost:8000/login/ ì ‘ê·¼
3. ë„¤íŠ¸ì›Œí¬ ìš”ì²­ í™•ì¸:
   - Request 1: /login/ â†’ Response 302 (Redirect)
   - Request 2: /dashboard/ â†’ Response 200 (OK)
```

---

## ğŸŒ TC-03: ë¹„ë¡œê·¸ì¸ API í˜¸ì¶œ

### ëª©í‘œ
> ë¹„ë¡œê·¸ì¸ ìƒíƒœì—ì„œ API í˜¸ì¶œ â†’ 401/302 ì‘ë‹µ

### ë°©ë²• A: curl ì‚¬ìš© (Terminal)

#### 1ë‹¨ê³„: Terminal/PowerShell ì—´ê¸°
```bash
# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd C:\Vibe-Mafia\w6-8-final-duwls
```

#### 2ë‹¨ê³„: API í˜¸ì¶œ (ë¹„ë¡œê·¸ì¸)
```bash
curl -i "http://localhost:8000/api/dashboard/chart-data/?year=2024"
```

**`-i` ì˜µì…˜:** ì‘ë‹µ í—¤ë” + ë³¸ë¬¸ ëª¨ë‘ í‘œì‹œ

#### 3ë‹¨ê³„: ê²°ê³¼ í™•ì¸
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **HTTP ìƒíƒœ** | 302 Found ë˜ëŠ” 401 Unauthorized |
| **ì‘ë‹µ í—¤ë”** | Location: http://localhost:8000/login/... |
| **ì‘ë‹µ ë³¸ë¬¸** | ë¡œê·¸ì¸ í˜ì´ì§€ HTML ë˜ëŠ” {"detail":"..."} |

#### 4ë‹¨ê³„: í†µê³¼ í™•ì¸
- â˜ ìƒíƒœ ì½”ë“œê°€ 302 ë˜ëŠ” 401
- â˜ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ê±°ë‚˜ ì¸ì¦ ê±°ë¶€ ë©”ì‹œì§€

### ì˜ˆìƒ ì‘ë‹µ
```
HTTP/1.1 302 Found
Location: http://localhost:8000/login/?next=/api/dashboard/chart-data/?year=2024
Content-Type: text/html; charset=utf-8

<html>
  <!-- ë¡œê·¸ì¸ í˜ì´ì§€ HTML -->
</html>
```

---

## ğŸŒ TC-03-1: ë¡œê·¸ì¸ í›„ API í˜¸ì¶œ

### ëª©í‘œ
> ë¡œê·¸ì¸ í›„ API í˜¸ì¶œ â†’ Chart.js JSON ë°ì´í„° ë°˜í™˜

### ë°©ë²• A: curl + ì¿ í‚¤ ì‚¬ìš©

#### 1ë‹¨ê³„: ë¡œê·¸ì¸í•˜ì—¬ ì„¸ì…˜ ì¿ í‚¤ ì €ì¥
```bash
curl -X POST "http://localhost:8000/login/" \
  -d "username=user1&password=user123!" \
  -c cookies.txt \
  -L

# -c cookies.txt: ì¿ í‚¤ë¥¼ íŒŒì¼ì— ì €ì¥
# -L: ë¦¬ë‹¤ì´ë ‰íŠ¸ ìë™ ë”°ë¼ê°€ê¸°
```

**ì„±ê³µ í™•ì¸:**
```
- ì¿ í‚¤ íŒŒì¼ ìƒì„±: cookies.txt
- í„°ë¯¸ë„ ë©”ì‹œì§€: ì—ëŸ¬ ì—†ìŒ
```

#### 2ë‹¨ê³„: ì €ì¥ëœ ì¿ í‚¤ë¡œ API í˜¸ì¶œ
```bash
curl -i "http://localhost:8000/api/dashboard/chart-data/?year=2024&department=ì»´í“¨í„°ê³µí•™ê³¼" \
  -b cookies.txt

# -b cookies.txt: ì €ì¥ëœ ì¿ í‚¤ í¬í•¨
```

#### 3ë‹¨ê³„: ê²°ê³¼ í™•ì¸
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **HTTP ìƒíƒœ** | 200 OK |
| **Content-Type** | application/json |
| **ì‘ë‹µ ë³¸ë¬¸** | Chart.js í˜¸í™˜ JSON |

#### 4ë‹¨ê³„: í†µê³¼ í™•ì¸
- â˜ ìƒíƒœ ì½”ë“œê°€ 200
- â˜ JSON ì‘ë‹µì´ ë°˜í™˜ë¨
- â˜ labelsì™€ datasets í•„ë“œ í¬í•¨

### ì˜ˆìƒ ì‘ë‹µ
```json
HTTP/1.1 200 OK
Content-Type: application/json

{
  "labels": ["2023", "2024"],
  "datasets": [
    {
      "label": "PAPER",
      "data": [10, 15],
      "backgroundColor": "#4A90E2"
    },
    {
      "label": "BUDGET",
      "data": [50000, 60000],
      "backgroundColor": "#50E3C2"
    }
  ]
}
```

### ë°©ë²• B: Postman ì‚¬ìš© (GUI)

#### 1ë‹¨ê³„: Postman ì„¤ì¹˜
- [ê³µì‹ ì‚¬ì´íŠ¸](https://www.postman.com/downloads/) ì—ì„œ ë‹¤ìš´ë¡œë“œ
- ì„¤ì¹˜ ë° ì‹¤í–‰

#### 2ë‹¨ê³„: ë¡œê·¸ì¸ ìš”ì²­ ìƒì„±
```
Method: POST
URL: http://localhost:8000/login/
Body (form-data):
  username: user1
  password: user123!
```

#### 3ë‹¨ê³„: Send í´ë¦­
- ì¿ í‚¤ê°€ ìë™ìœ¼ë¡œ ì €ì¥ë¨ (Postman í•˜ë‹¨ Cookies í™•ì¸)

#### 4ë‹¨ê³„: API ìš”ì²­ ìƒì„±
```
Method: GET
URL: http://localhost:8000/api/dashboard/chart-data/?year=2024&department=ì»´í“¨í„°ê³µí•™ê³¼
Headers:
  Content-Type: application/json
```

#### 5ë‹¨ê³„: Send í´ë¦­
- ì‘ë‹µì—ì„œ JSON ë°ì´í„° í™•ì¸

#### 6ë‹¨ê³„: ì‘ë‹µ í™•ì¸
```json
{
  "labels": ["2023", "2024"],
  "datasets": [...]
}
```

---

## ğŸ‘¥ TC-05: ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦

### ëª©í‘œ
> ì¼ë°˜ ì‚¬ìš©ìëŠ” Admin ì°¨ë‹¨, ê´€ë¦¬ìë§Œ Admin ì ‘ê·¼

### ì‹¤í–‰ ë‹¨ê³„

#### 1ë‹¨ê³„: ì¼ë°˜ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸
```
1. í˜„ì¬ ë¡œê·¸ì¸ë˜ì–´ ìˆë‹¤ë©´: http://localhost:8000/logout/
2. ë¡œê·¸ì¸ í˜ì´ì§€: http://localhost:8000/login/
3. ì…ë ¥:
   Username: user1
   Password: user123!
```

#### 2ë‹¨ê³„: Admin í˜ì´ì§€ ì ‘ê·¼ ì‹œë„
```
URL: http://localhost:8000/admin/
```

#### 3ë‹¨ê³„: ê²°ê³¼ í™•ì¸ (ì¼ë°˜ ì‚¬ìš©ì)
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **HTTP ìƒíƒœ** | 403 Forbidden |
| **ë©”ì‹œì§€** | "You don't have permission..." |
| **ì ‘ê·¼** | ì°¨ë‹¨ë¨ |

#### 4ë‹¨ê³„: ê´€ë¦¬ìë¡œ ë¡œê·¸ì¸
```
1. ë¡œê·¸ì•„ì›ƒ: http://localhost:8000/logout/
2. ë¡œê·¸ì¸ í˜ì´ì§€: http://localhost:8000/login/
3. ì…ë ¥:
   Username: admin
   Password: admin123!
```

#### 5ë‹¨ê³„: Admin í˜ì´ì§€ ì ‘ê·¼
```
URL: http://localhost:8000/admin/
```

#### 6ë‹¨ê³„: ê²°ê³¼ í™•ì¸ (ê´€ë¦¬ì)
| í•­ëª© | ì˜ˆìƒê°’ |
|------|--------|
| **HTTP ìƒíƒœ** | 200 OK |
| **í˜ì´ì§€** | Django Admin ëŒ€ì‹œë³´ë“œ |
| **ë©”ë‰´** | Ingest > Metric records ë³´ì„ |
| **ì ‘ê·¼** | í—ˆìš©ë¨ |

#### 7ë‹¨ê³„: í†µê³¼ í™•ì¸
- â˜ ì¼ë°˜ ì‚¬ìš©ì: 403 Forbidden
- â˜ ê´€ë¦¬ì: 200 OK

### ì˜ˆìƒ í™”ë©´ (ì¼ë°˜ ì‚¬ìš©ì)
```
403 Forbidden

You don't have permission to access this resource.
```

### ì˜ˆìƒ í™”ë©´ (ê´€ë¦¬ì)
```
Django Administration

Site administration

â–¼ Authentication and Authorization
  â€¢ Groups
  â€¢ Users

â–¼ Ingest
  â€¢ Metric records

â–¼ Dashboard
```

---

## ğŸ§ª API í…ŒìŠ¤íŠ¸ - ë‹¤ì–‘í•œ í•„í„° ì¡°í•©

### ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

#### Case A: ì—°ë„ë§Œ í•„í„°
```bash
curl "http://localhost:8000/api/dashboard/chart-data/?year=2024" \
  -b cookies.txt
```

**ì˜ˆìƒ:**
```json
{
  "labels": ["2024"],
  "datasets": [
    {
      "label": "PAPER",
      "data": [27],
      "backgroundColor": "#4A90E2"
    },
    ...
  ]
}
```

#### Case B: í•™ê³¼ë§Œ í•„í„°
```bash
curl "http://localhost:8000/api/dashboard/chart-data/?department=ì „ìê³µí•™ê³¼" \
  -b cookies.txt
```

**ì˜ˆìƒ:**
```json
{
  "labels": ["2024"],
  "datasets": [
    {
      "label": "PAPER",
      "data": [12],
      "backgroundColor": "#4A90E2"
    }
  ]
}
```

#### Case C: í•„í„° ì—†ìŒ (ì „ì²´ ë°ì´í„°)
```bash
curl "http://localhost:8000/api/dashboard/chart-data/" \
  -b cookies.txt
```

**ì˜ˆìƒ:**
```json
{
  "labels": ["2023", "2024"],
  "datasets": [...]
}
```

#### Case D: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë°ì´í„°
```bash
curl "http://localhost:8000/api/dashboard/chart-data/?year=2030" \
  -b cookies.txt
```

**ì˜ˆìƒ:**
```json
{
  "labels": [],
  "datasets": []
}
```

#### Case E: ì˜ëª»ëœ ì—°ë„ í˜•ì‹
```bash
curl "http://localhost:8000/api/dashboard/chart-data/?year=abc" \
  -b cookies.txt
```

**ì˜ˆìƒ:**
```
HTTP/1.1 400 Bad Request

{
  "error": "invalid_parameter"
}
```

---

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡

### ê²°ê³¼ ê¸°ë¡ ì–‘ì‹

ê° í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•œ í›„ ì•„ë˜ í‘œì— ê²°ê³¼ë¥¼ ê¸°ë¡í•˜ì„¸ìš”.

| # | í…ŒìŠ¤íŠ¸ í•­ëª© | ì˜ˆìƒê°’ | ì‹¤ì œê°’ | ìƒíƒœ | ë¹„ê³  |
|----|-----------|--------|--------|------|------|
| 1 | TC-01: ë¹„ë¡œê·¸ì¸ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ | 302 â†’ /login/ | | â˜ Pass | |
| 2 | TC-04: ìœ íš¨í•œ ê³„ì • ë¡œê·¸ì¸ | 302 â†’ /dashboard/ | | â˜ Pass | |
| 3 | TC-04-1: ìœ íš¨í•˜ì§€ ì•Šì€ ê³„ì • | 200 + ì—ëŸ¬ë©”ì‹œì§€ | | â˜ Pass | |
| 4 | TC-02: ë¡œê·¸ì¸ í›„ /login/ ì ‘ê·¼ | 302 â†’ /dashboard/ | | â˜ Pass | |
| 5 | TC-03: ë¹„ë¡œê·¸ì¸ API í˜¸ì¶œ | 302 ë˜ëŠ” 401 | | â˜ Pass | |
| 6 | TC-03-1: ë¡œê·¸ì¸ í›„ API í˜¸ì¶œ | 200 + JSON | | â˜ Pass | |
| 7 | TC-03-1-A: ì—°ë„ í•„í„° | 200 + JSON | | â˜ Pass | |
| 8 | TC-03-1-B: í•™ê³¼ í•„í„° | 200 + JSON | | â˜ Pass | |
| 9 | TC-03-1-C: í•„í„° ì—†ìŒ | 200 + JSON | | â˜ Pass | |
| 10 | TC-03-1-D: ë¹ˆ ë°ì´í„° | 200 + [] | | â˜ Pass | |
| 11 | TC-03-1-E: ì˜ëª»ëœ íŒŒë¼ë¯¸í„° | 400 + error | | â˜ Pass | |
| 12 | TC-05: ì¼ë°˜ ì‚¬ìš©ì Admin | 403 | | â˜ Pass | |
| 13 | TC-05: ê´€ë¦¬ì Admin | 200 | | â˜ Pass | |

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ: "í¬íŠ¸ 8000ì´ ì´ë¯¸ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤"

**ì¦ìƒ:**
```
Address already in use: ('127.0.0.1', 8000)
```

**í•´ê²°:**
```bash
# Windows: ë‹¤ë¥¸ í¬íŠ¸ì—ì„œ ì‹¤í–‰
python manage.py runserver 8080

# ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
netstat -ano | findstr :8000
taskkill /PID <PID> /F
```

### ë¬¸ì œ: "ModuleNotFoundError: No module named 'apps'"

**ì¦ìƒ:**
```
ModuleNotFoundError: No module named 'apps'
```

**í•´ê²°:**
```bash
# 1. ì˜¬ë°”ë¥¸ ë””ë ‰í† ë¦¬ì¸ì§€ í™•ì¸
pwd
# ì¶œë ¥: C:\Vibe-Mafia\w6-8-final-duwls

# 2. PYTHONPATH ì„¤ì •
set PYTHONPATH=%CD%

# 3. ì¬ì‹œì‘
python manage.py runserver
```

### ë¬¸ì œ: "ë¡œê·¸ì¸ í›„ì—ë„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"

**ì¦ìƒ:**
```
ëŒ€ì‹œë³´ë“œëŠ” ë‚˜íƒ€ë‚˜ì§€ë§Œ ì°¨íŠ¸ê°€ ë¹„ì–´ìˆìŒ
```

**í•´ê²°:**
```bash
python manage.py shell

# ë°ì´í„° í™•ì¸
>>> from apps.ingest.models import MetricRecord
>>> MetricRecord.objects.count()
# 0ì´ ë‚˜ì˜¤ë©´ Step 0.6 ë‹¤ì‹œ ì‹¤í–‰

# ë°ì´í„°ê°€ ìˆëŠ”ë°ë„ ì•ˆ ë‚˜íƒ€ë‚˜ë©´
>>> MetricRecord.objects.all()
# ë°ì´í„° ìƒì„¸ í™•ì¸
```

### ë¬¸ì œ: "ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ CSRF í† í° ì˜¤ë¥˜"

**ì¦ìƒ:**
```
CSRF verification failed
```

**í•´ê²°:**
```bash
# 1. ë¸Œë¼ìš°ì € ì¿ í‚¤ ì‚­ì œ
# F12 â†’ Application â†’ Cookies â†’ ëª¨ë‘ ì‚­ì œ

# 2. ë‹¤ì‹œ ë¡œê·¸ì¸
http://localhost:8000/login/
```

### ë¬¸ì œ: "APIê°€ HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤"

**ì¦ìƒ:**
```
ì‘ë‹µì´ JSONì´ ì•„ë‹ˆë¼ HTML (ë¡œê·¸ì¸ í˜ì´ì§€)
```

**í•´ê²°:**
```bash
# 1. ì¿ í‚¤ê°€ í¬í•¨ë˜ì—ˆëŠ”ì§€ í™•ì¸
curl -i -b cookies.txt "http://localhost:8000/api/dashboard/chart-data/"

# 2. ì¿ í‚¤ íŒŒì¼ ì¬ìƒì„±
curl -X POST "http://localhost:8000/login/" \
  -d "username=user1&password=user123!" \
  -c cookies.txt \
  -L

# 3. API ë‹¤ì‹œ í˜¸ì¶œ
curl -i -b cookies.txt "http://localhost:8000/api/dashboard/chart-data/"
```

---

## ğŸ“ˆ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (ì„ íƒ)

### ì‘ë‹µ ì‹œê°„ ì¸¡ì •

#### Windows PowerShell:
```powershell
$response = Measure-Command {
    curl "http://localhost:8000/api/dashboard/chart-data/" -b cookies.txt
}

$response.TotalMilliseconds
# ëª©í‘œ: 500ms ì´ë‚´
```

#### macOS/Linux:
```bash
time curl "http://localhost:8000/api/dashboard/chart-data/" -b cookies.txt
# ëª©í‘œ: 0.5ì´ˆ ì´ë‚´
```

---

## âœ¨ ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí–ˆë‚˜ìš”?

- â˜ **ì´ˆê¸° ì„¤ì •** (Step 0.1 ~ 0.7) ì™„ë£Œ
- â˜ **TC-01** í†µê³¼: ë¹„ë¡œê·¸ì¸ ëŒ€ì‹œë³´ë“œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- â˜ **TC-04** í†µê³¼: ìœ íš¨í•œ ë¡œê·¸ì¸
- â˜ **TC-04-1** í†µê³¼: ìœ íš¨í•˜ì§€ ì•Šì€ ë¡œê·¸ì¸ (ì—ëŸ¬)
- â˜ **TC-02** í†µê³¼: ë¡œê·¸ì¸ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ ë¦¬ë‹¤ì´ë ‰íŠ¸
- â˜ **TC-03** í†µê³¼: ë¹„ë¡œê·¸ì¸ API í˜¸ì¶œ ê±°ë¶€
- â˜ **TC-03-1** í†µê³¼: ë¡œê·¸ì¸ í›„ API í˜¸ì¶œ ì„±ê³µ
- â˜ **TC-03-1-A~E** í†µê³¼: ë‹¤ì–‘í•œ í•„í„° ì¡°í•©
- â˜ **TC-05** í†µê³¼: ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦

**ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆë‹¤ë©´ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰**

---

## ğŸ“š ë‹¤ìŒ ë‹¨ê³„

í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´:

1. **ìë™í™” í…ŒìŠ¤íŠ¸ ì‘ì„±:**
   ```bash
   # tests/test_001_login_dashboard.py ì‘ì„±
   python manage.py test
   ```

2. **í”„ë¡œë•ì…˜ ì¤€ë¹„:**
   - í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (DEBUG=False ë“±)
   - ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
   - ë³´ì•ˆ ì„¤ì • ê²€í† 

3. **ëª¨ë‹ˆí„°ë§ ì„¤ì •:**
   - ë¡œê·¸ ìˆ˜ì§‘
   - ì˜¤ë¥˜ ì¶”ì 

---

## ğŸ“ ì°¸ê³  ë¬¸ì„œ

- [PRD](../3.prd.md) - ì œí’ˆ ìš”êµ¬ì‚¬í•­
- [UserFlow](../4.userflow.md) - ì‚¬ìš©ì ì—¬ì •
- [API ëª…ì„¸](001-test-ë¡œê·¸ì¸ë°ëŒ€ì‹œë³´ë“œ_í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤.md) - ìƒì„¸ ëª…ì„¸

---

**ì‘ì„±ì:** Claude Code
**ìµœì¢… ìˆ˜ì •:** 2025-10-31
