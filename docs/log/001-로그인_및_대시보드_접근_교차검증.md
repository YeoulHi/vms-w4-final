# 001. 로그인 및 대시보드 접근 기능 교차 검증 로그

## 구현 의도

`docs/spec/001-plan-로그인-및-대시보드-접근.md` 및 `docs/spec/001-spec-로그인-및-대시보드-접근.md` 문서에 따라, Django의 내장 인증 시스템을 활용하여 사용자 로그인 및 대시보드 접근 제어 기능을 구현하는 것이 목표였습니다. 이는 비로그인 사용자를 로그인 페이지로 리다이렉트하고, 로그인 성공 시 대시보드로 이동시키며, 이미 로그인된 사용자가 로그인 페이지에 접근 시 대시보드로 리다이렉트하는 것을 포함합니다.

## 잘된 점

1.  **Django 내장 인증 시스템 활용**: `LoginView`, `LogoutView`를 `config/urls.py`에 연결하여 Django의 기본 세션 인증 방식을 성공적으로 적용했습니다.
2.  **대시보드 접근 제어**: `apps/dashboard/views.py`의 `DashboardView`에 `@method_decorator(login_required, name='dispatch')`를 적용하여 비로그인 사용자의 대시보드 접근을 차단하고 로그인 페이지로 리다이렉트되도록 구현했습니다. (TC-01 충족)
3.  **로그인 후 리다이렉트**: `settings.py`에 `LOGIN_REDIRECT_URL = '/dashboard/'`를 설정하고, `LoginView`에 `redirect_authenticated_user = True` 옵션을 적용하여 로그인 성공 시 및 이미 로그인된 사용자가 `/login/` 페이지 접근 시 대시보드로 올바르게 리다이렉트되도록 구현했습니다. (TC-02 충족)
4.  **로그인 폼 및 에러 메시지**: `templates/registration/login.html`을 통해 기본적인 로그인 폼을 제공하며, Django의 기본 폼 에러 처리(`{% if form.errors %}`)를 통해 잘못된 ID/PW 입력 시 에러 메시지가 표시되도록 구현했습니다. (TC-04 충족)
5.  **루트 URL 리다이렉트**: `config/urls.py`에 `path("", RedirectView.as_view(url='/dashboard/', permanent=True))`를 추가하여 루트 URL 접근 시 대시보드로 리다이렉트되도록 설정했습니다.

## 안된 점 (또는 추가 논의 필요 사항)

1.  **`/api/dashboard/chart-data/` API 엔드포인트 구현 및 접근 제어**: `001-plan` 문서에는 `ChartDataAPIView`에 `@method_decorator(login_required, name='dispatch')`를 적용하는 내용이 있었으나, 현재 구현 범위에서는 해당 API 뷰가 아직 생성되지 않았습니다. 따라서 비로그인 상태에서 API 호출 시 401 Unauthorized 응답을 기대하는 TC-03은 현재 검증할 수 없습니다. 이 부분은 다음 기능 구현 단계에서 다루어져야 합니다.
2.  **관리자 페이지 (`/admin/`) 접근 시 `is_staff` 검증**: `001-spec` 문서의 엣지 케이스 중 "권한 없는 페이지 접근" (일반 사용자(`is_staff=False`)가 관리자 페이지(`/admin/`) 접근 시 403 Forbidden)에 대한 명시적인 구현은 `DashboardView`에 포함되지 않았습니다. 이는 Django Admin 자체의 권한 검증 로직에 의해 처리되므로 기능적으로는 문제가 없지만, 명세에 따라 `DashboardView`와 유사하게 `@staff_member_required`와 같은 데코레이터를 통해 명시적으로 제어하는 것을 고려해볼 수 있습니다. 현재는 Django Admin의 기본 동작에 의존하고 있습니다.

## 결론

"로그인 및 대시보드 접근" 기능은 문서화된 계획과 명세의 핵심 요구사항을 충실히 이행하여 구현되었습니다. 몇 가지 미구현된 부분(API 엔드포인트)과 Django의 기본 동작에 의존하는 부분(관리자 페이지 접근 제어)이 있지만, 이는 현재 MVP 범위 및 Django의 특성을 고려할 때 합리적인 결정으로 판단됩니다. 다음 단계에서는 `ChartDataAPIView` 구현 및 관련 접근 제어를 진행해야 합니다.
